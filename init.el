;;; don't initialize cruft
(if (fboundp 'tool-bar-mode) (tool-bar-mode -1))
(if (fboundp 'scroll-bar-mode) (scroll-bar-mode -1))
(if (and (fboundp 'menu-bar-mode) (not (display-graphic-p))) (menu-bar-mode -1))
(setq vc-handled-backends nil)
(setq show-paren-delay 0)


(require 'server)
(unless (server-running-p)
  (server-start))

(when (< emacs-major-version 24)
  (add-to-list 'load-path "~/.emacs.d/"))
(require 'package)
(setq package-archives '(("gnu" . "http://elpa.gnu.org/packages/")
                         ("melpa" . "http://melpa.milkbox.net/packages/")))

(defvar daf-packages '(
                       auctex
                       ace-jump-mode
                       ag
                       anti-zenburn-theme
                       auto-complete
                       deep-thought-theme
                       evil
                       evil-leader
                       evil-paredit
                       expand-region
                       flycheck
                       go-mode
                       js2-mode
                       magit
                       markdown-mode
                       multi-web-mode
                       multiple-cursors
                       paredit
                       phoenix-dark-mono-theme
                       phoenix-dark-pink-theme
                       pony-mode
                       popup
                       processing-mode
                       rainbow-delimiters
                       simple-httpd
                       skewer-mode
                       solarized-theme
                       twilight-theme
                       undo-tree
                       w3m
                       yasnippet
                       zenburn-theme
                       ))

(package-initialize)

(when (not package-archive-contents)
  (package-refresh-contents))

(dolist (p daf-packages)
  (when (not (package-installed-p p))
    (package-install p)))


(defun evil-plugins ()
  (require 'evil-paredit)
  (global-evil-leader-mode))

(defun load-plugins ()
  (evil-plugins)
  (if (not (display-graphic-p))
      (evil-mode 1))
  (require 'auto-complete)
  (require 'paredit)
  (require 'sclang)
  (global-auto-complete-mode)
  (global-undo-tree-mode)
  (global-flycheck-mode)
  (yas-global-mode)
  (add-to-list 'auto-mode-alist '("\\.js\\'" . js2-mode)))

;; load settings -- wait for packages to load first (emacswiki.org/emacs/ELPA)
(add-to-list 'load-path "~/.emacs.d/config")
(add-to-list 'load-path "~/.emacs.d/plugin/supercollider")

(add-hook 'after-init-hook
          (lambda ()
            (require 'mode-hooks)
            (require 'global-settings)
            (require 'evil-setup)
            (load-plugins)))

;; Colors, font
(if (< emacs-major-version 24)
    (add-to-list 'load-path "~/.emacs.d/themes")
  (add-to-list 'custom-theme-load-path "~/.emacs.d/themes"))
(if (display-graphic-p)
    (load-theme 'anti-zenburn t)
  (load-theme 'twilight t))
(set-default-font "-*-Menlo-normal-normal-normal-*-*-*-*-*-m-0-iso10646-1")

;;;;;;;;;;;;;;;;;;;
;; Autogenerated ;;
;;;;;;;;;;;;;;;;;;;

(custom-set-variables
 ;; custom-set-variables was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 '(Linum-format "%7i ")
 '(compilation-message-face (quote default))
 '(custom-safe-themes (quote ("1f3304214265481c56341bcee387ef1abb684e4efbccebca0e120be7b1a13589" "3bd9497fb8f39c28ab58a9e957152ba2dc41223c23c5520ef10fc7bd6b222384" "8f6537eb6f9d66b060c736f5f680f5c661e0a6b311b86defa293bc5ba104a030" "764777857ef24b4ef1041be725960172ac40964b9f23a75894a578759ba6652f" "e16a771a13a202ee6e276d06098bc77f008b73bbac4d526f160faa2d76c1dd0e" "d83d50e8d2ef8643934f271856f7c74a715fb7aaa780d700a3670465b78da258" "c377a5f3548df908d58364ec7a0ee401ee7235e5e475c86952dc8ed7c4345d8e" "fc6e906a0e6ead5747ab2e7c5838166f7350b958d82e410257aeeb2820e8a07a" "bd50e3b2dea5d01950991bc230583fdab93f3fd7af6a7c62421c370e347226ec" "c8cc8dad64aebc4ecd81fbb5007d5a29488f018b02bf0d61efdb0fd1ae0dee24" "3bedd09a2afee0d1f8d52892f740cd86f665ab1291fcdefb120963a0fa9b18d7" "8f05205f2254cbd129e0e16d4f3826ddded3e1230c21023b341d94a5293e3617" "8aebf25556399b58091e533e455dd50a6a9cba958cc4ebb0aab175863c25b9a4" "7a2c92b6267b84ae28a396f24dd832e29a164c1942f1f8b3fe500f1c25f8e09d" "d677ef584c6dfc0697901a44b885cc18e206f05114c8a3b7fde674fce6180879" "1d1622e8bc2292dab58d7ba452cef0ac81463dcf021f3f5a65afb0d551c1d746" default)))
 '(evil-cross-lines nil)
 '(exec-path (quote ("/usr/local/share/python" "/usr/local/bin" "/usr/bin" "/bin" "/usr/sbin" "/sbin" "/usr/local/Cellar/emacs/24.3/libexec/emacs/24.3/x86_64-apple-darwin12.3.0"))))

(custom-set-faces
 ;; custom-set-faces was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 )
;; (put 'set-goal-column 'disabled nil)
